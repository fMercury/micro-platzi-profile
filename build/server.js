'use strict';var _regenerator=require('babel-runtime/regenerator');var _regenerator2=_interopRequireDefault(_regenerator);var _asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator');var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var requestHandler=function(){var _ref=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(request,response){var _parse,query;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_parse=(0,_url.parse)(request.url,true);query=_parse.query;// if the username is not defined
if(query.username){_context.next=4;break}return _context.abrupt('return',(0,_micro.send)(response,400,'You must query for a specific username.'));case 4:_context.t0=response;_context.next=7;return(0,_scrapper2.default)(query.username);case 7:_context.t1=_context.sent;return _context.abrupt('return',(0,_micro.send)(_context.t0,200,_context.t1));case 9:case'end':return _context.stop();}}},_callee,this)}));return function requestHandler(_x,_x2){return _ref.apply(this,arguments)}}();var _url=require('url');var _micro=require('micro');var _micro2=_interopRequireDefault(_micro);require('babel-polyfill');var _scrapper=require('./scrapper.js');var _scrapper2=_interopRequireDefault(_scrapper);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(0,_micro2.default)(requestHandler).listen(3000);